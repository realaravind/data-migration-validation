# ==============================================
# Ombudsman Validation Studio - Environment Config
# ==============================================
# Copy this file to /data/ombudsman/ombudsman.env and edit values

# ==============================================
# Path Configuration
# ==============================================
BASE_DIR=/data/ombudsman
OMBUDSMAN_DATA_DIR=/data/ombudsman/data
OMBUDSMAN_CORE_DIR=/data/ombudsman/ombudsman_core/src/ombudsman/config
OMBUDSMAN_LOG_DIR=/data/ombudsman/logs

# ==============================================
# Logging Configuration
# ==============================================
OVS_LOG_DIR=/var/log/ombudsman
OVS_LOG_LEVEL=INFO
OVS_LOG_MAX_SIZE=10485760
OVS_LOG_BACKUP_COUNT=5

# ==============================================
# Feature Flags
# ==============================================
# Enable/disable sample data generation (set to false in production)
SAMPLE_DATA_ENABLED=true

# ==============================================
# SQL Server Connection
# ==============================================
MSSQL_HOST=your-sql-server-host
MSSQL_PORT=1433
MSSQL_USER=your-username
MSSQL_PASSWORD=your-password
MSSQL_DATABASE=your-database

# ==============================================
# Snowflake Connection
# ==============================================
SNOWFLAKE_USER=your-snowflake-user
SNOWFLAKE_ACCOUNT=your-account-identifier
SNOWFLAKE_WAREHOUSE=COMPUTE_WH
SNOWFLAKE_ROLE=ACCOUNTADMIN
SNOWFLAKE_DATABASE=your-database
SNOWFLAKE_SCHEMA=PUBLIC

# Authentication: Choose ONE method (priority: OAuth > Token > Password)
# ---------------------------------------------
# Option 1: OAuth authentication (recommended for MFA-enabled accounts)
# Requires Security Integration in Snowflake. See:
# https://docs.snowflake.com/en/user-guide/oauth-custom
# SNOWFLAKE_OAUTH_CLIENT_ID=your-oauth-client-id
# SNOWFLAKE_OAUTH_CLIENT_SECRET=your-oauth-client-secret
# SNOWFLAKE_OAUTH_REFRESH_TOKEN=your-refresh-token
# SNOWFLAKE_OAUTH_REDIRECT_URI=https://localhost:8001/callback
# SNOWFLAKE_OAUTH_TOKEN_ENDPOINT=https://your-account.snowflakecomputing.com/oauth/token-request

# Option 2: Direct access token (pre-obtained OAuth access token)
# SNOWFLAKE_TOKEN=your-oauth-access-token

# Option 3: Password authentication (traditional, won't work with MFA)
SNOWFLAKE_PASSWORD=your-snowflake-password

# ==============================================
# LLM Provider Configuration (for AI-powered schema mapping)
# ==============================================
# Provider selection: ollama, openai, azure_openai, anthropic
LLM_PROVIDER=ollama

# Common settings for all providers
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2048
LLM_TIMEOUT=30

# ---------------------------------------------
# Ollama (default - local models, no API key)
# ---------------------------------------------
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2

# ---------------------------------------------
# OpenAI (requires API key)
# ---------------------------------------------
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini

# ---------------------------------------------
# Azure OpenAI (requires all three settings)
# ---------------------------------------------
# AZURE_OPENAI_API_KEY=...
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_DEPLOYMENT=your-deployment-name
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# ---------------------------------------------
# Anthropic (requires API key)
# ---------------------------------------------
# ANTHROPIC_API_KEY=sk-ant-...
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# ==============================================
# Server Ports
# ==============================================
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT=3000

# ==============================================
# Frontend Configuration (IMPORTANT - MUST CHANGE!)
# ==============================================
# API URL for frontend to connect to backend
# IMPORTANT: Change localhost to your server's public IP or domain name!
# Example: http://192.168.1.100:8000 or http://myserver.com:8000
# If you don't change this, the frontend will not work from remote browsers!
VITE_API_URL=http://YOUR_SERVER_IP:8000

# CORS allowed origins (comma-separated)
# IMPORTANT: Must include your frontend URL with the server's public IP!
# Example: http://20.244.1.189:3000,http://localhost:3000
CORS_ORIGINS=http://YOUR_SERVER_IP:3000,http://localhost:3000

# ==============================================
# Authentication Backend
# ==============================================
# Options: sqlite (default) or sqlserver
AUTH_BACKEND=sqlserver

# SQL Server Auth Database (only needed if AUTH_BACKEND=sqlserver)
# Can be same as MSSQL_* or a different database
AUTH_DB_SERVER=your-sql-server-host
AUTH_DB_USER=your-username
AUTH_DB_PASSWORD=your-password

# Database name for authentication tables (default: ovs_studio)
# The setup script will try to create this database automatically.
# If your user doesn't have CREATE DATABASE permission, ask your DBA to:
#   1. CREATE DATABASE ovs_studio;
#   2. Grant your user db_owner role on the new database
# Then run the setup script - it will detect the existing database.
AUTH_DB_NAME=ovs_studio

# ==============================================
# Security (generate with: openssl rand -hex 32)
# ==============================================
SECRET_KEY=change-this-to-a-random-string

# JWT token expiration (in minutes)
# ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================
# Logging
# ==============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ==============================================
# Optional: Email Notifications (SMTP)
# ==============================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_FROM_EMAIL=noreply@example.com
# SMTP_FROM_NAME=Ombudsman Validation Studio
# SMTP_USE_TLS=true

# ==============================================
# Optional: Slack Notifications
# ==============================================
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
# SLACK_CHANNEL=#alerts

# ==============================================
# Optional: Webhook Notifications
# ==============================================
# WEBHOOK_URL=https://your-endpoint.com/webhook
# WEBHOOK_TIMEOUT=30
